# 924. Minimize Malware Spread

#### Question Link

{% embed url="https://leetcode.com/problems/minimize-malware-spread/description/" %}

#### Solution

Find graph components.\
If there are more than 1 nodes in a component we can remove anything as it wont make a difference.\
Else if there is 1 malicious node in a component we need to remove the component with biggest size.

```python
class Solution:
    def minMalwareSpread(self, graph: List[List[int]], initial: List[int]) -> int:
        parents = list(range(len(graph)))
        ranks = [0] * len(graph)
        
        def find(a):
            if a == parents[a]:
                return a
            else:
                parents[a] = find(parents[a])
                return parents[a]
        
        def union(a, b):
            a_par = find(a)
            b_par = find(b)
            
            if ranks[a_par] > ranks[b_par]:
                parents[b_par] = a_par
            elif ranks[a_par] < ranks[b_par]:
                parents[a_par] = b_par
            else:
                parents[a_par] = b_par
                ranks[b_par] += 1
        
        
        for i in range(len(graph)):
            for j in range(len(graph)):
                if graph[i][j] == 1:
                    union(i, j)
        
        component_malwares = [0] * len(graph)
        component_sizes = [0] * len(graph)
        for node in range(len(graph)):
            component_sizes[find(node)] += 1

        for malicious_node in initial:
            component_malwares[find(malicious_node)] += 1
        
        current_impacted_nodes = 0
        initial.sort()

        res = initial[0]
        for malware_node in initial:
            component_parent = find(malware_node)
            if component_malwares[component_parent] == 1:
                if component_sizes[component_parent] > current_impacted_nodes:
                    res = malware_node
                    current_impacted_nodes = component_sizes[component_parent]
        return res
```
